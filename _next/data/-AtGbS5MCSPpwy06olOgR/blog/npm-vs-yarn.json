{"pageProps":{"post":{"title":"npm 和 yarn 的对比","date":"2022-02-21","slug":"npm-vs-yarn","content":"<h1>npm 和 yarn 的对比</h1>\n<h2>简而言之</h2>\n<p>Yarn over npm.</p>\n<p>yarn 是 facebook 主导的 Node.js 包管理工具，它能够：</p>\n<ol>\n<li>\n<p>安装更快（并行安装，相较于与 npm 的串行更快）</p>\n</li>\n<li>\n<p>离线安装（对已经安装过的包，支持离线安装）</p>\n</li>\n<li>\n<p>使用 yarn.lock 文件保证锁定所有依赖的版本（npm v5.x 开始支持）</p>\n</li>\n<li>\n<p>更安全（防止在安装时执行代码）</p>\n</li>\n</ol>\n<h2>使用</h2>\n<ul>\n<li>\n<p>yarn 能够自动读取 <code>package.json</code> 文件，格式几乎都可以互相兼容。生成独有的 <code>yarn.lock</code> 文件，确保其他人使用 yarn 能够获取一样的依赖。</p>\n</li>\n<li>\n<p>大型项目中，<code>package.json</code> 中信息不够明确，依赖关系出现冲突，这时候应该先删除 <code>node_modules</code> 重新安装，使得依赖项的版本更明确。这时再转换到 yarn 上。</p>\n</li>\n</ul>\n<h2>npm 和 yarn 的命令之区别</h2>\n<blockquote>\n<p>cf: <a href=\"https://classic.yarnpkg.com/en/docs/migrating-from-npm#toc-cli-commands-comparison\">CLI commands comparison</a></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th><strong>npm (v5)</strong></th>\n<th><strong>Yarn</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>npm install</td>\n<td>yarn add</td>\n</tr>\n<tr>\n<td>(N/A)</td>\n<td>yarn add --flat</td>\n</tr>\n<tr>\n<td>(N/A)</td>\n<td>yarn add --har</td>\n</tr>\n<tr>\n<td>npm install --no-package-lock</td>\n<td>yarn add --no-lockfile</td>\n</tr>\n<tr>\n<td>(N/A)</td>\n<td>yarn add --pure-lockfile</td>\n</tr>\n<tr>\n<td>npm install [package] --save</td>\n<td>yarn add [package]</td>\n</tr>\n<tr>\n<td>npm install [package] --save-dev</td>\n<td>yarn add [package] --dev</td>\n</tr>\n<tr>\n<td>(N/A)</td>\n<td>yarn add [package] --peer</td>\n</tr>\n<tr>\n<td>npm install [package] --save-optional</td>\n<td>yarn add [package] --optional</td>\n</tr>\n<tr>\n<td>npm install [package] --save-exact</td>\n<td>yarn add [package] --exact</td>\n</tr>\n<tr>\n<td>(N/A)</td>\n<td>yarn add [package] --tilde</td>\n</tr>\n<tr>\n<td>npm install [package] --global</td>\n<td>yarn global add [package]</td>\n</tr>\n<tr>\n<td>npm update --global</td>\n<td>yarn global upgrade</td>\n</tr>\n<tr>\n<td>npm rebuild</td>\n<td>yarn add --force</td>\n</tr>\n<tr>\n<td>npm uninstall [package]</td>\n<td>yarn remove [package]</td>\n</tr>\n<tr>\n<td>npm cache clean</td>\n<td>yarn cache clean [package]</td>\n</tr>\n<tr>\n<td>rm -rf node_modules  npm install</td>\n<td>yarn upgrade</td>\n</tr>\n<tr>\n<td>npm version major</td>\n<td>yarn version --major</td>\n</tr>\n<tr>\n<td>npm version minor</td>\n<td>yarn version --minor</td>\n</tr>\n<tr>\n<td>npm version patch</td>\n<td>yarn version --patch</td>\n</tr>\n</tbody>\n</table>\n<h2>结论</h2>\n<p>npm 5.x 之后，磨平了和 yarn 之间的很多差距，比如安装速度、离线安装和依赖版本的锁定等问题，不过 yarn 某些情况下还是会快些。使用哪一个，也仅仅是用户的偏好的问题。</p>\n"}},"__N_SSG":true}