<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="https://pzij.github.io/_next/static/css/40b8a65ab385b93c.css" as="style"/><link rel="stylesheet" href="https://pzij.github.io/_next/static/css/40b8a65ab385b93c.css" data-n-g=""/><link rel="preload" href="https://pzij.github.io/_next/static/css/c2a527101433f11d.css" as="style"/><link rel="stylesheet" href="https://pzij.github.io/_next/static/css/c2a527101433f11d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://pzij.github.io/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://pzij.github.io/_next/static/chunks/webpack-e09df0756682281e.js" defer=""></script><script src="https://pzij.github.io/_next/static/chunks/framework-6e4ba497ae0c8a3f.js" defer=""></script><script src="https://pzij.github.io/_next/static/chunks/main-101cfeaa18eb0e64.js" defer=""></script><script src="https://pzij.github.io/_next/static/chunks/pages/_app-ca6aae25bc99a05f.js" defer=""></script><script src="https://pzij.github.io/_next/static/chunks/61-741c7743b5979a7a.js" defer=""></script><script src="https://pzij.github.io/_next/static/chunks/964-e2167bad81babf73.js" defer=""></script><script src="https://pzij.github.io/_next/static/chunks/pages/blog/%5Bslug%5D-2f09827022c6b085.js" defer=""></script><script src="https://pzij.github.io/_next/static/1C6WBvVoojRWY_fusCsbQ/_buildManifest.js" defer=""></script><script src="https://pzij.github.io/_next/static/1C6WBvVoojRWY_fusCsbQ/_ssgManifest.js" defer=""></script><script src="https://pzij.github.io/_next/static/1C6WBvVoojRWY_fusCsbQ/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="container mx-auto px-[5vw] max-w-screen-xl"><div class="mb-32"><header class="flex justify-between items-center my-10 h-52 bg-no-repeat bg-center"><div class="logo ml-8 flex justify-start items-center cursor-pointer scale-110 transition-transform hover:scale-105"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2772%27%20height=%2772%27/%3e"/></span><img alt="Jun" href="/" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Jun" href="/" srcSet="https://pzij.github.io/qun.png 1x, https://pzij.github.io/qun.png 2x" src="https://pzij.github.io/qun.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><ul class="list-none float-right mr-8"><span class="navbar-item mx-8 cursor-pointer text-gray-400 hover:text-black uppercase font-light" href="/">Home</span><span class="navbar-item mx-8 cursor-pointer text-gray-400 hover:text-black uppercase font-light" href="/about">About</span><span class="navbar-item mx-8 cursor-pointer text-gray-400 hover:text-black uppercase font-light" href="/contact">Contact</span></ul></header><title>npm 和 yarn 的对比<!-- --> | J.P.</title><h1 class="text-3xl flex justify-center items-center underline" style="text-decoration-color:#780a;margin-bottom:2em">npm 和 yarn 的对比</h1><div class="blog-post-container"><h1>npm 和 yarn 的对比</h1>
<h2>简而言之</h2>
<p>Yarn over npm.</p>
<p>yarn 是 facebook 主导的 Node.js 包管理工具，它能够：</p>
<ol>
<li>
<p>安装更快（并行安装，相较于与 npm 的串行更快）</p>
</li>
<li>
<p>离线安装（对已经安装过的包，支持离线安装）</p>
</li>
<li>
<p>使用 yarn.lock 文件保证锁定所有依赖的版本（npm v5.x 开始支持）</p>
</li>
<li>
<p>更安全（防止在安装时执行代码）</p>
</li>
</ol>
<h2>使用</h2>
<ul>
<li>
<p>yarn 能够自动读取 <code>package.json</code> 文件，格式几乎都可以互相兼容。生成独有的 <code>yarn.lock</code> 文件，确保其他人使用 yarn 能够获取一样的依赖。</p>
</li>
<li>
<p>大型项目中，<code>package.json</code> 中信息不够明确，依赖关系出现冲突，这时候应该先删除 <code>node_modules</code> 重新安装，使得依赖项的版本更明确。这时再转换到 yarn 上。</p>
</li>
</ul>
<h2>npm 和 yarn 的命令之区别</h2>
<blockquote>
<p>cf: <a href="https://classic.yarnpkg.com/en/docs/migrating-from-npm#toc-cli-commands-comparison">CLI commands comparison</a></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>npm (v5)</strong></th>
<th><strong>Yarn</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>npm install</td>
<td>yarn add</td>
</tr>
<tr>
<td>(N/A)</td>
<td>yarn add --flat</td>
</tr>
<tr>
<td>(N/A)</td>
<td>yarn add --har</td>
</tr>
<tr>
<td>npm install --no-package-lock</td>
<td>yarn add --no-lockfile</td>
</tr>
<tr>
<td>(N/A)</td>
<td>yarn add --pure-lockfile</td>
</tr>
<tr>
<td>npm install [package] --save</td>
<td>yarn add [package]</td>
</tr>
<tr>
<td>npm install [package] --save-dev</td>
<td>yarn add [package] --dev</td>
</tr>
<tr>
<td>(N/A)</td>
<td>yarn add [package] --peer</td>
</tr>
<tr>
<td>npm install [package] --save-optional</td>
<td>yarn add [package] --optional</td>
</tr>
<tr>
<td>npm install [package] --save-exact</td>
<td>yarn add [package] --exact</td>
</tr>
<tr>
<td>(N/A)</td>
<td>yarn add [package] --tilde</td>
</tr>
<tr>
<td>npm install [package] --global</td>
<td>yarn global add [package]</td>
</tr>
<tr>
<td>npm update --global</td>
<td>yarn global upgrade</td>
</tr>
<tr>
<td>npm rebuild</td>
<td>yarn add --force</td>
</tr>
<tr>
<td>npm uninstall [package]</td>
<td>yarn remove [package]</td>
</tr>
<tr>
<td>npm cache clean</td>
<td>yarn cache clean [package]</td>
</tr>
<tr>
<td>rm -rf node_modules  npm install</td>
<td>yarn upgrade</td>
</tr>
<tr>
<td>npm version major</td>
<td>yarn version --major</td>
</tr>
<tr>
<td>npm version minor</td>
<td>yarn version --minor</td>
</tr>
<tr>
<td>npm version patch</td>
<td>yarn version --patch</td>
</tr>
</tbody>
</table>
<h2>结论</h2>
<p>npm 5.x 之后，磨平了和 yarn 之间的很多差距，比如安装速度、离线安装和依赖版本的锁定等问题，不过 yarn 某些情况下还是会快些。使用哪一个，也仅仅是用户的偏好的问题。</p>
</div><hr class="hr-fade-content" data-content="&lt;/ npm 和 yarn 的对比 &gt;"/></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"npm 和 yarn 的对比","date":"2022-02-21","slug":"npm-vs-yarn","content":"\u003ch1\u003enpm 和 yarn 的对比\u003c/h1\u003e\n\u003ch2\u003e简而言之\u003c/h2\u003e\n\u003cp\u003eYarn over npm.\u003c/p\u003e\n\u003cp\u003eyarn 是 facebook 主导的 Node.js 包管理工具，它能够：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e安装更快（并行安装，相较于与 npm 的串行更快）\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e离线安装（对已经安装过的包，支持离线安装）\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e使用 yarn.lock 文件保证锁定所有依赖的版本（npm v5.x 开始支持）\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e更安全（防止在安装时执行代码）\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e使用\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eyarn 能够自动读取 \u003ccode\u003epackage.json\u003c/code\u003e 文件，格式几乎都可以互相兼容。生成独有的 \u003ccode\u003eyarn.lock\u003c/code\u003e 文件，确保其他人使用 yarn 能够获取一样的依赖。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e大型项目中，\u003ccode\u003epackage.json\u003c/code\u003e 中信息不够明确，依赖关系出现冲突，这时候应该先删除 \u003ccode\u003enode_modules\u003c/code\u003e 重新安装，使得依赖项的版本更明确。这时再转换到 yarn 上。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003enpm 和 yarn 的命令之区别\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003ecf: \u003ca href=\"https://classic.yarnpkg.com/en/docs/migrating-from-npm#toc-cli-commands-comparison\"\u003eCLI commands comparison\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003cstrong\u003enpm (v5)\u003c/strong\u003e\u003c/th\u003e\n\u003cth\u003e\u003cstrong\u003eYarn\u003c/strong\u003e\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm install\u003c/td\u003e\n\u003ctd\u003eyarn add\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e(N/A)\u003c/td\u003e\n\u003ctd\u003eyarn add --flat\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e(N/A)\u003c/td\u003e\n\u003ctd\u003eyarn add --har\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm install --no-package-lock\u003c/td\u003e\n\u003ctd\u003eyarn add --no-lockfile\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e(N/A)\u003c/td\u003e\n\u003ctd\u003eyarn add --pure-lockfile\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm install [package] --save\u003c/td\u003e\n\u003ctd\u003eyarn add [package]\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm install [package] --save-dev\u003c/td\u003e\n\u003ctd\u003eyarn add [package] --dev\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e(N/A)\u003c/td\u003e\n\u003ctd\u003eyarn add [package] --peer\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm install [package] --save-optional\u003c/td\u003e\n\u003ctd\u003eyarn add [package] --optional\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm install [package] --save-exact\u003c/td\u003e\n\u003ctd\u003eyarn add [package] --exact\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e(N/A)\u003c/td\u003e\n\u003ctd\u003eyarn add [package] --tilde\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm install [package] --global\u003c/td\u003e\n\u003ctd\u003eyarn global add [package]\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm update --global\u003c/td\u003e\n\u003ctd\u003eyarn global upgrade\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm rebuild\u003c/td\u003e\n\u003ctd\u003eyarn add --force\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm uninstall [package]\u003c/td\u003e\n\u003ctd\u003eyarn remove [package]\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm cache clean\u003c/td\u003e\n\u003ctd\u003eyarn cache clean [package]\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003erm -rf node_modules  npm install\u003c/td\u003e\n\u003ctd\u003eyarn upgrade\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm version major\u003c/td\u003e\n\u003ctd\u003eyarn version --major\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm version minor\u003c/td\u003e\n\u003ctd\u003eyarn version --minor\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enpm version patch\u003c/td\u003e\n\u003ctd\u003eyarn version --patch\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2\u003e结论\u003c/h2\u003e\n\u003cp\u003enpm 5.x 之后，磨平了和 yarn 之间的很多差距，比如安装速度、离线安装和依赖版本的锁定等问题，不过 yarn 某些情况下还是会快些。使用哪一个，也仅仅是用户的偏好的问题。\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"npm-vs-yarn"},"buildId":"1C6WBvVoojRWY_fusCsbQ","assetPrefix":"https://pzij.github.io","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>